# WS Series Terminal (UMB Binary)

WS 시리즈(예: WS200/WS500)의 **UMB Binary 통신**을 테스트/모니터링하기 위한 데스크톱 터미널 도구입니다.  
상단에는 **TX/RX 원문(HEX)** 을 그대로 보여주고, 하단에는 **선택한 채널을 사람이 읽을 수 있는 값으로 변환**해 `;` 구분자로 출력합니다.

---

## ✨ 핵심 기능

- **2분할 출력**
  - **RAW(상단)**: `[HH:MM:SS] TX:` / `[HH:MM:SS] RX:` 원문 출력
  - **PARSER(하단)**: TX mode에 설정한 `channels` 순서대로 변환값을 `값 ; 값 ; ...` 형태로 출력
- **TX Mode**
  - 채널 목록(`channels`)을 입력하면 요청 프레임을 만들어 주기 전송
- **안정적인 RX 프레임 조립**
  - UMB 텔레그램의 `LEN` 기반으로 프레임을 조립하여 payload 내부 값(예: `0x04`) 때문에 끊기는 문제 방지
- **설정 자동 저장/복원**
  - COM/baud/채널/표시 옵션 등을 자동으로 저장하고 재실행 시 복원

---

## 🧭 빠른 시작 (Quick Start)

1. 프로그램 실행  
2. **Serial 설정** 선택  
   - COM Port  
   - Baudrate  
   - Data bits / Parity / Stop bits (장비 설정과 동일하게)  
3. **Connect**  
4. **TX Mode**에서 `channels` 입력 후 전송 시작  
5. 확인  
   - 상단 RAW: TX/RX 원문  
   - 하단 PARSER: 채널 순서대로 변환값 (`;` 구분)

---

## 🔎 Parser 출력 규칙

하단(Parser) 창은 **TX Mode의 channels 순서를 그대로** 따릅니다.

예시:

- `channels = 100,200,300,401,501`  
  → `온도 ; 습도 ; 기압 ; 풍속 ; 풍향`

- `channels = 401,501`  
  → `풍속 ; 풍향`

값이 없는 채널은 `NA`로 표기될 수 있습니다(응답에 해당 채널이 없거나 파싱 실패 시).

---

## 🧾 기본 채널(Default)

기본 channels(배포용 기본값):

- `100,200,300,401,501`

프로젝트 기준 매핑(현장 장비 설정에 따라 달라질 수 있습니다):

- `100`: 기온  
- `200`: 상대습도  
- `300`: 기압  
- `401`: 풍속  
- `501`: 풍향  

> 채널 의미/단위는 장비 모델/펌웨어/설정에 따라 다를 수 있으니, 최종 해석은 장비 설정을 기준으로 하십시오.

---

## ⚙️ 설정 파일(Config)

프로그램 설정은 자동 저장됩니다.

- 저장 경로(Windows):
  - `%LOCALAPPDATA%\WS_Series_Terminal\config.json`
  - 예: `C:\Users\<사용자>\AppData\Local\WS_Series_Terminal\config.json`

저장되는 항목 예:
- Serial 설정(COM/baud 등)
- TX Mode 채널 목록(channels)
- 표시 옵션(HEX/DEC 등)

---

## ♻️ 설정 초기화(Reset)

문제가 생겼을 때 가장 빠른 초기화 방법:

1) 프로그램 종료  
2) 아래 폴더로 이동  
   - `Win + R` → `%LOCALAPPDATA%\WS_Series_Terminal`  
3) `config.json` 삭제(또는 다른 이름으로 백업)  
4) 프로그램 재실행 → 기본값으로 시작

---

## 🧰 Flow Control 옵션 안내

대부분 환경에서는 **모두 OFF**로 두는 것을 권장합니다.  
(장비/케이블/어댑터가 명확히 요구하거나, 오버런/유실이 의심될 때만 켜서 테스트하십시오.)

- XON/XOFF (Software)
- RTS/CTS (Hardware)
- DSR/DTR (Hardware)

---

## 🧯 트러블슈팅

### 1) 하단(Parser) 값이 안 뜹니다
- RAW(RX)에서 실제로 값 레코드가 들어오는지 확인하십시오.  
- `channels`에 넣은 채널이 장비에서 지원/활성화되어 있는지 확인하십시오.  
- 통신이 불안정하면 RX가 잘리는 경우가 있으니 케이블/USB-Serial/포트 점유 등을 점검하십시오.

### 2) Connect가 안 됩니다
- 다른 프로그램에서 COM 포트를 사용 중인지 확인하십시오.
- 장치 관리자에서 USB-Serial 드라이버/COM 번호가 정상인지 확인하십시오.

### 3) 값은 뜨는데 예상과 다릅니다
- 채널 매핑/단위는 장비 설정에 따라 달라질 수 있습니다.
- 펌웨어/모드에 따라 같은 채널이라도 스케일이 달라질 수 있으니 장비 문서 기준으로 해석하십시오.


## 📬 문의/피드백

현장 로그 공유 시 아래 2가지만 포함해 주시면 재현이 빠릅니다.

- TX/RX 원문(가능하면 RAW 창 그대로)
- 사용한 channels 목록 + 통신 설정(COM/baud)
